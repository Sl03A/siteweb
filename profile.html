<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Slozw - Mon profil</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .profile-section {
            padding: 100px 0 60px;
            background: #f8fafc;
            min-height: calc(100vh - 200px);
        }
        
        .profile-header {
            background: white;
            padding: 2rem;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            margin-bottom: 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 1rem;
        }
        
        .profile-actions {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }
        
        .profile-content {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 2rem;
        }
        
        @media (max-width: 1024px) {
            .profile-content {
                grid-template-columns: 1fr;
            }
        }
        
        .profile-sidebar {
            background: white;
            padding: 2rem;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }
        
        .profile-main {
            background: white;
            padding: 2rem;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }
        
        .avatar-large {
            text-align: center;
            margin-bottom: 2rem;
        }
        
        .avatar-img {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            background: #f1f5f9;
            margin: 0 auto 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            color: #64748b;
            overflow: hidden;
            border: 5px solid white;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .avatar-img img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .profile-stats {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        
        .stat-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.75rem;
            background: #f8fafc;
            border-radius: 10px;
        }
        
        .profile-tabs {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 2rem;
            border-bottom: 1px solid #e2e8f0;
            padding-bottom: 1rem;
            flex-wrap: wrap;
        }
        
        .profile-tab {
            padding: 0.75rem 1.5rem;
            background: none;
            border: none;
            color: #64748b;
            font-weight: 500;
            cursor: pointer;
            border-radius: 8px 8px 0 0;
            transition: all 0.3s;
        }
        
        .profile-tab:hover {
            color: #2563eb;
            background: #f1f5f9;
        }
        
        .profile-tab.active {
            color: #2563eb;
            background: white;
            border-bottom: 3px solid #2563eb;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .form-section {
            margin-bottom: 2rem;
        }
        
        .form-section h3 {
            margin-bottom: 1.5rem;
            color: #1e293b;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid #f1f5f9;
        }
        
        .change-password-form {
            max-width: 500px;
        }
        
        .danger-zone {
            border: 2px solid #fee2e2;
            background: #fef2f2;
            padding: 1.5rem;
            border-radius: 10px;
            margin-top: 3rem;
        }
        
        .danger-zone h4 {
            color: #dc2626;
            margin-bottom: 1rem;
        }
        
        .btn-danger {
            background: #ef4444;
            color: white;
            border: none;
        }
        
        .btn-danger:hover {
            background: #dc2626;
        }
        
        .notifications-list {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        
        .notification-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem;
            background: #f8fafc;
            border-radius: 10px;
            border: 1px solid #e2e8f0;
        }
        
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 24px;
        }
        
        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: #cbd5e1;
            transition: .4s;
            border-radius: 34px;
        }
        
        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 16px;
            width: 16px;
            left: 4px;
            bottom: 4px;
            background: white;
            transition: .4s;
            border-radius: 50%;
        }
        
        input:checked + .toggle-slider {
            background: #2563eb;
        }
        
        input:checked + .toggle-slider:before {
            transform: translateX(26px);
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <a href="index.html" class="logo">Slozw</a>
            <div class="nav-links">
                <a href="index.html">Accueil</a>
                <a href="services.html">Services</a>
                <a href="portfolio.html">Portfolio</a>
                <a href="boutique.html">Boutique</a>
                <a href="contact.html">Contact</a>
            </div>
            <div class="nav-actions">
                <!-- Auth buttons seront injectés ici -->
                <a href="boutique.html#panier" class="panier-btn">
                    <i class="fas fa-shopping-cart"></i>
                    <span class="panier-count">0</span>
                </a>
                <button class="menu-toggle">
                    <i class="fas fa-bars"></i>
                </button>
            </div>
        </div>
    </nav>

    <!-- Page de profil -->
    <section class="profile-section">
        <div class="container">
            <!-- En-tête -->
            <div class="profile-header">
                <div>
                    <h1>Mon profil</h1>
                    <p>Gérez vos informations personnelles et vos préférences</p>
                </div>
                <div class="profile-actions">
                    <a href="dashboard.html" class="btn btn-outline">
                        <i class="fas fa-arrow-left"></i> Tableau de bord
                    </a>
                    <button class="btn btn-primary" id="saveProfile">
                        <i class="fas fa-save"></i> Enregistrer
                    </button>
                </div>
            </div>

            <!-- Contenu -->
            <div class="profile-content">
                <!-- Sidebar -->
                <div class="profile-sidebar">
                    <div class="avatar-large">
                        <div class="avatar-img" id="avatarLarge">
                            <i class="fas fa-user"></i>
                        </div>
                        <div>
                            <h3 id="userFullName">Nom Prénom</h3>
                            <p id="userEmail" style="color: #64748b; margin-bottom: 1rem;">email@example.com</p>
                            <button class="btn btn-outline btn-sm" onclick="changeAvatar()">
                                <i class="fas fa-camera"></i> Changer la photo
                            </button>
                        </div>
                    </div>
                    
                    <div class="profile-stats">
                        <div class="stat-item">
                            <span>Membre depuis</span>
                            <strong id="memberSince">--/--/----</strong>
                        </div>
                        <div class="stat-item">
                            <span>Commandes</span>
                            <strong id="totalOrders">0</strong>
                        </div>
                        <div class="stat-item">
                            <span>Projets actifs</span>
                            <strong id="activeProjects">0</strong>
                        </div>
                        <div class="stat-item">
                            <span>Dernière connexion</span>
                            <span id="lastLogin">--/--/----</span>
                        </div>
                    </div>
                </div>

                <!-- Main content -->
                <div class="profile-main">
                    <!-- Onglets -->
                    <div class="profile-tabs">
                        <button class="profile-tab active" data-tab="info">Informations</button>
                        <button class="profile-tab" data-tab="security">Sécurité</button>
                        <button class="profile-tab" data-tab="notifications">Notifications</button>
                        <button class="profile-tab" data-tab="preferences">Préférences</button>
                    </div>

                    <!-- Informations -->
                    <div class="tab-content active" id="infoTab">
                        <form id="profileForm">
                            <div class="form-section">
                                <h3>Informations personnelles</h3>
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="firstName">Prénom *</label>
                                        <input type="text" id="firstName" name="firstName" required>
                                    </div>
                                    <div class="form-group">
                                        <label for="lastName">Nom *</label>
                                        <input type="text" id="lastName" name="lastName" required>
                                    </div>
                                </div>
                                
                                <div class="form-group">
                                    <label for="email">Email *</label>
                                    <input type="email" id="email" name="email" required>
                                </div>
                                
                                <div class="form-group">
                                    <label for="phone">Téléphone</label>
                                    <input type="tel" id="phone" name="phone">
                                </div>
                            </div>

                            <div class="form-section">
                                <h3>Informations professionnelles</h3>
                                <div class="form-group">
                                    <label for="company">Entreprise</label>
                                    <input type="text" id="company" name="company">
                                </div>
                                
                                <div class="form-group">
                                    <label for="jobTitle">Poste</label>
                                    <input type="text" id="jobTitle" name="jobTitle">
                                </div>
                            </div>

                            <div class="form-section">
                                <h3>Adresse</h3>
                                <div class="form-group">
                                    <label for="address">Adresse</label>
                                    <textarea id="address" name="address" rows="3"></textarea>
                                </div>
                                
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="city">Ville</label>
                                        <input type="text" id="city" name="city">
                                    </div>
                                    <div class="form-group">
                                        <label for="postalCode">Code postal</label>
                                        <input type="text" id="postalCode" name="postalCode">
                                    </div>
                                </div>
                                
                                <div class="form-group">
                                    <label for="country">Pays</label>
                                    <select id="country" name="country">
                                        <option value="">Sélectionnez un pays</option>
                                        <option value="FR">France</option>
                                        <option value="BE">Belgique</option>
                                        <option value="CH">Suisse</option>
                                        <option value="CA">Canada</option>
                                        <option value="OTHER">Autre</option>
                                    </select>
                                </div>
                            </div>
                        </form>
                    </div>

                    <!-- Sécurité -->
                    <div class="tab-content" id="securityTab">
                        <div class="form-section">
                            <h3>Changer le mot de passe</h3>
                            <form id="passwordForm" class="change-password-form">
                                <div class="form-group">
                                    <label for="currentPassword">Mot de passe actuel</label>
                                    <input type="password" id="currentPassword" name="currentPassword" required>
                                </div>
                                
                                <div class="form-group">
                                    <label for="newPassword">Nouveau mot de passe</label>
                                    <input type="password" id="newPassword" name="newPassword" required>
                                </div>
                                
                                <div class="form-group">
                                    <label for="confirmPassword">Confirmer le nouveau mot de passe</label>
                                    <input type="password" id="confirmPassword" name="confirmPassword" required>
                                </div>
                                
                                <div class="password-strength">
                                    <div class="strength-bar">
                                        <div class="strength-fill" id="strengthFill"></div>
                                    </div>
                                    <div class="strength-text" id="strengthText">Faible</div>
                                </div>
                                
                                <button type="submit" class="btn btn-primary">
                                    <i class="fas fa-key"></i> Changer le mot de passe
                                </button>
                            </form>
                        </div>

                        <div class="form-section">
                            <h3>Sécurité de compte</h3>
                            <div style="margin-bottom: 1rem;">
                                <p style="color: #64748b; margin-bottom: 0.5rem;">Connexions actives</p>
                                <div style="background: #f8fafc; padding: 1rem; border-radius: 8px;">
                                    <p style="margin-bottom: 0.5rem;"><strong>Appareil actuel</strong></p>
                                    <p style="color: #64748b; font-size: 0.9rem;">
                                        <i class="fas fa-desktop"></i> Windows • Chrome • {date}
                                    </p>
                                </div>
                            </div>
                            
                            <button class="btn btn-outline" id="logoutAll">
                                <i class="fas fa-sign-out-alt"></i> Déconnecter tous les appareils
                            </button>
                        </div>
                    </div>

                    <!-- Notifications -->
                    <div class="tab-content" id="notificationsTab">
                        <div class="form-section">
                            <h3>Préférences de notifications</h3>
                            <p style="color: #64748b; margin-bottom: 1.5rem;">
                                Choisissez les types de notifications que vous souhaitez recevoir.
                            </p>
                            
                            <div class="notifications-list">
                                <div class="notification-item">
                                    <div>
                                        <strong>Nouvelles commandes</strong>
                                        <p style="color: #64748b; font-size: 0.9rem;">Recevoir un email lors d'une nouvelle commande</p>
                                    </div>
                                    <label class="toggle-switch">
                                        <input type="checkbox" id="notifOrders" checked>
                                        <span class="toggle-slider"></span>
                                    </label>
                                </div>
                                
                                <div class="notification-item">
                                    <div>
                                        <strong>Mises à jour de commande</strong>
                                        <p style="color: #64748b; font-size: 0.9rem;">Suivi de l'avancement de vos commandes</p>
                                    </div>
                                    <label class="toggle-switch">
                                        <input type="checkbox" id="notifUpdates" checked>
                                        <span class="toggle-slider"></span>
                                    </label>
                                </div>
                                
                                <div class="notification-item">
                                    <div>
                                        <strong>Newsletter</strong>
                                        <p style="color: #64748b; font-size: 0.9rem;">Conseils digitaux et offres spéciales</p>
                                    </div>
                                    <label class="toggle-switch">
                                        <input type="checkbox" id="notifNewsletter" checked>
                                        <span class="toggle-slider"></span>
                                    </label>
                                </div>
                                
                                <div class="notification-item">
                                    <div>
                                        <strong>Messages du support</strong>
                                        <p style="color: #64748b; font-size: 0.9rem;">Réponses à vos questions et demandes</p>
                                    </div>
                                    <label class="toggle-switch">
                                        <input type="checkbox" id="notifSupport" checked>
                                        <span class="toggle-slider"></span>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Préférences -->
                    <div class="tab-content" id="preferencesTab">
                        <div class="form-section">
                            <h3>Préférences générales</h3>
                            <div class="form-group">
                                <label for="language">Langue</label>
                                <select id="language" name="language">
                                    <option value="fr" selected>Français</option>
                                    <option value="en">English</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="timezone">Fuseau horaire</label>
                                <select id="timezone" name="timezone">
                                    <option value="Europe/Paris" selected>Europe/Paris (UTC+1)</option>
                                    <option value="UTC">UTC</option>
                                    <option value="America/New_York">America/New_York (UTC-5)</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="dateFormat">Format de date</label>
                                <select id="dateFormat" name="dateFormat">
                                    <option value="fr" selected>JJ/MM/AAAA</option>
                                    <option value="en">MM/DD/YYYY</option>
                                    <option value="iso">AAAA-MM-JJ</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- Zone de danger -->
                    <div class="danger-zone">
                        <h4><i class="fas fa-exclamation-triangle"></i> Zone de danger</h4>
                        <p style="color: #64748b; margin-bottom: 1rem;">
                            Ces actions sont irréversibles. Veuillez être certain de vouloir effectuer ces modifications.
                        </p>
                        
                        <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
                            <button class="btn btn-outline" id="exportData">
                                <i class="fas fa-download"></i> Exporter mes données
                            </button>
                            <button class="btn btn-danger" id="deleteAccount">
                                <i class="fas fa-trash"></i> Supprimer mon compte
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-grid">
                <div class="footer-col">
                    <h3>Slozw</h3>
                    <p>Créateur digital spécialisé en design, développement et e-commerce.</p>
                </div>
                
                <div class="footer-col">
                    <h4>Navigation</h4>
                    <a href="index.html">Accueil</a>
                    <a href="services.html">Services</a>
                    <a href="portfolio.html">Portfolio</a>
                    <a href="boutique.html">Boutique</a>
                    <a href="contact.html">Contact</a>
                </div>
                
                <div class="footer-col">
                    <h4>Mon compte</h4>
                    <a href="dashboard.html">Tableau de bord</a>
                    <a href="orders.html">Mes commandes</a>
                    <a href="profile.html">Mon profil</a>
                    <a href="messages.html">Messages</a>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p>&copy; 2024 Slozw. Tous droits réservés.</p>
                <div class="social-links">
                    <a href="#"><i class="fab fa-instagram"></i></a>
                    <a href="#"><i class="fab fa-linkedin"></i></a>
                    <a href="#"><i class="fab fa-behance"></i></a>
                </div>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="script.js"></script>
    <script src="auth.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const user = auth.getCurrentUser();
            
            // Rediriger si non connecté
            if (!user) {
                window.location.href = 'login.html';
                return;
            }
            
            // Charger les données utilisateur
            loadUserProfile(user);
            
            // Gestion des onglets
            const tabBtns = document.querySelectorAll('.profile-tab');
            const tabContents = document.querySelectorAll('.tab-content');
            
            tabBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    const tabId = this.dataset.tab;
                    
                    // Mettre à jour les boutons actifs
                    tabBtns.forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Afficher le contenu correspondant
                    tabContents.forEach(content => content.classList.remove('active'));
                    document.getElementById(`${tabId}Tab`).classList.add('active');
                });
            });
            
            // Gestion des formulaires
            const profileForm = document.getElementById('profileForm');
            const passwordForm = document.getElementById('passwordForm');
            
            // Sauvegarde du profil
            document.getElementById('saveProfile').addEventListener('click', function() {
                saveProfile();
            });
            
            // Changer le mot de passe
            passwordForm.addEventListener('submit', async function(e) {
                e.preventDefault();
                
                const currentPassword = document.getElementById('currentPassword').value;
                const newPassword = document.getElementById('newPassword').value;
                const confirmPassword = document.getElementById('confirmPassword').value;
                
                // Validation
                if (newPassword !== confirmPassword) {
                    showNotification('Les mots de passe ne correspondent pas', 'error');
                    return;
                }
                
                if (newPassword.length < 6) {
                    showNotification('Le mot de passe doit contenir au moins 6 caractères', 'error');
                    return;
                }
                
                // Changer le mot de passe
                const result = await auth.changePassword(currentPassword, newPassword);
                
                if (result.success) {
                    showNotification('Mot de passe changé avec succès', 'success');
                    passwordForm.reset();
                } else {
                    showNotification(result.message, 'error');
                }
            });
            
            // Force du mot de passe
            document.getElementById('newPassword').addEventListener('input', checkPasswordStrength);
            
            // Déconnexion de tous les appareils
            document.getElementById('logoutAll').addEventListener('click', function() {
                if (confirm('Êtes-vous sûr de vouloir vous déconnecter de tous les appareils ?')) {
                    auth.logout();
                    showNotification('Déconnecté de tous les appareils', 'success');
                    setTimeout(() => {
                        window.location.href = 'login.html';
                    }, 1000);
                }
            });
            
            // Exporter les données
            document.getElementById('exportData').addEventListener('click', function() {
                showNotification('Préparation de l\'export de vos données...', 'info');
                
                // Simuler l'export
                setTimeout(() => {
                    const userData = {
                        ...user,
                        orders: JSON.parse(localStorage.getItem('userOrders')).filter(o => o.userId === user.id) || []
                    };
                    
                    const dataStr = JSON.stringify(userData, null, 2);
                    const dataBlob = new Blob([dataStr], { type: 'application/json' });
                    const url = window.URL.createObjectURL(dataBlob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = `slozw-donnees-${user.id}.json`;
                    document.body.appendChild(a);
                    a.click();
                    document.body.removeChild(a);
                    window.URL.revokeObjectURL(url);
                    
                    showNotification('Données exportées avec succès', 'success');
                }, 2000);
            });
            
            // Supprimer le compte
            document.getElementById('deleteAccount').addEventListener('click', function() {
                if (confirm('Êtes-vous ABSOLUMENT SÛR de vouloir supprimer votre compte ? Cette action est irréversible.')) {
                    if (prompt('Tapez "SUPPRIMER" pour confirmer la suppression définitive de votre compte :') === 'SUPPRIMER') {
                        // Supprimer le compte
                        const users = JSON.parse(localStorage.getItem('users')) || [];
                        const updatedUsers = users.filter(u => u.id !== user.id);
                        localStorage.setItem('users', JSON.stringify(updatedUsers));
                        
                        // Déconnecter
                        auth.logout();
                        
                        showNotification('Compte supprimé avec succès', 'success');
                        setTimeout(() => {
                            window.location.href = 'index.html';
                        }, 2000);
                    }
                }
            });
        });
        
        function loadUserProfile(user) {
            // Avatar
            document.getElementById('userFullName').textContent = user.name;
            document.getElementById('userEmail').textContent = user.email;
            
            // Informations personnelles
            const names = user.name.split(' ');
            document.getElementById('firstName').value = names[0] || '';
            document.getElementById('lastName').value = names.slice(1).join(' ') || '';
            document.getElementById('email').value = user.email || '';
            document.getElementById('phone').value = user.phone || '';
            document.getElementById('company').value = user.company || '';
            
            // Date d'inscription
            const joinDate = user.createdAt ? new Date(user.createdAt) : new Date();
            document.getElementById('memberSince').textContent = joinDate.toLocaleDateString('fr-FR');
            
            // Dernière connexion
            const lastLogin = user.lastLogin ? new Date(user.lastLogin) : new Date();
            document.getElementById('lastLogin').textContent = lastLogin.toLocaleDateString('fr-FR');
            
            // Commandes
            const orders = JSON.parse(localStorage.getItem('userOrders')) || [];
            const userOrders = orders.filter(o => o.userId === user.id);
            document.getElementById('totalOrders').textContent = userOrders.length;
            
            // Préférences
            if (user.preferences) {
                if (user.preferences.newsletter !== undefined) {
                    document.getElementById('notifNewsletter').checked = user.preferences.newsletter;
                }
            }
        }
        
        function saveProfile() {
            const user = auth.getCurrentUser();
            if (!user) return;
            
            const updates = {
                name: `${document.getElementById('firstName').value} ${document.getElementById('lastName').value}`,
                email: document.getElementById('email').value,
                phone: document.getElementById('phone').value,
                company: document.getElementById('company').value,
                jobTitle: document.getElementById('jobTitle').value,
                address: document.getElementById('address').value,
                city: document.getElementById('city').value,
                postalCode: document.getElementById('postalCode').value,
                country: document.getElementById('country').value,
                preferences: {
                    newsletter: document.getElementById('notifNewsletter').checked,
                    language: document.getElementById('language').value,
                    timezone: document.getElementById('timezone').value,
                    dateFormat: document.getElementById('dateFormat').value
                }
            };
            
            // Mettre à jour le profil
            auth.updateProfile(updates).then(result => {
                if (result.success) {
                    showNotification('Profil mis à jour avec succès', 'success');
                    loadUserProfile(result.user);
                } else {
                    showNotification(result.message, 'error');
                }
            });
        }
        
        function changeAvatar() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = 'image/*';
            
            input.onchange = function(e) {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        document.getElementById('avatarLarge').innerHTML = `<img src="${e.target.result}" alt="Avatar">`;
                        
                        // Sauvegarder dans localStorage
                        const user = auth.getCurrentUser();
                        if (user) {
                            const users = JSON.parse(localStorage.getItem('users')) || [];
                            const userIndex = users.findIndex(u => u.id === user.id);
                            if (userIndex !== -1) {
                                users[userIndex].avatar = e.target.result;
                                localStorage.setItem('users', JSON.stringify(users));
                            }
                        }
                    };
                    reader.readAsDataURL(file);
                }
            };
            
            input.click();
        }
        
        function checkPasswordStrength() {
            const password = document.getElementById('newPassword').value;
            const strengthFill = document.getElementById('strengthFill');
            const strengthText = document.getElementById('strengthText');
            
            let strength = 0;
            let color = '#ef4444';
            let text = 'Faible';
            
            if (password.length >= 8) strength += 25;
            if (/[a-z]/.test(password) && /[A-Z]/.test(password)) strength += 25;
            if (/\d/.test(password)) strength += 25;
            if (/[^A-Za-z0-9]/.test(password)) strength += 25;
            
            strengthFill.style.width = strength + '%';
            
            if (strength >= 75) {
                color = '#10b981';
                text = 'Fort';
            } else if (strength >= 50) {
                color = '#f59e0b';
                text = 'Moyen';
            }
            
            strengthFill.style.background = color;
            strengthText.textContent = text;
            strengthText.style.color = color;
        }
        
        function showNotification(message, type = 'success') {
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.textContent = message;
            notification.style.cssText = `
                position: fixed;
                bottom: 20px;
                right: 20px;
                padding: 1rem 1.5rem;
                background: ${type === 'success' ? '#10b981' : type === 'error' ? '#ef4444' : '#3b82f6'};
                color: white;
                border-radius: 8px;
                box-shadow: 0 4px 15px rgba(0,0,0,0.2);
                z-index: 9999;
            `;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.transition = 'opacity 0.3s';
                notification.style.opacity = '0';
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 300);
            }, 3000);
        }
    </script>
</body>
</html>
